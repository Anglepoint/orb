<h2>
    Documentation <a name="Documentation"></a><a href="#Documentation"><small>&#x00a7;</small></a>
</h2>

<br>
<p>Using <code>orb</code> to build a pivot grid is simple:</p>
<p></p>
<ul>
    <li>Create a <a href="#Configuration">configuration object</a> for the pivot grid:
        <blockquote><code>var config = { dataSource: mysource, fields: [...], rows: [...], ...};</code>
        </blockquote>
    </li>
    <li>Create a pivot grid widget using the configuration object:
        <blockquote><code>var pgrid = new orb.pgridwidget(config);</code>
        </blockquote>
    </li>
    <li>Render the pivot grid, supplying a container html element:
        <blockquote><code>pgrid.render(document.getElementById('pgridContainer'));</code>
        </blockquote>
    </li>
</ul>

<h3>
    Configuration <a name="Configuration"></a><a href="#Configuration"><small>&#x00a7;</small></a>
</h3>

<h2>
    <small>
        <span class="label label-info">dataSource</span>
        <a name="Configuration-dataSource"></a><a href="#Configuration-dataSource"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Array</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Pivot grid data source. It can be an array of arrays or objects. When it is an array of objects, field names are object properties. When it is an array of arrays, field names are array indexes.
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>null</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">dataHeadersLocation</span>
    <a name="Configuration-dataHeadersLocation"></a><a href="#Configuration-dataHeadersLocation"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>String</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Data headers location, <code>'rows'</code> or <code>'columns'</code>.
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>'rows'</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">grandTotal</span>
    <a name="Configuration-grandTotal"></a><a href="#Configuration-grandTotal"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Object</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Grand total settings:
                <ul>
                    <li><code>rowsvisible</code>: grand total row visibility</li>
                    <li><code>columnsvisible</code>: grand total column visibility</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <pre>{
  "rowsvisible": true,
  "columnsvisible": true
}</pre>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">subTotal</span>
    <a name="Configuration-subTotal"></a><a href="#Configuration-subTotal"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Object</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Sub total settings:
                <ul>
                    <li><code>visible</code>: sub total rows visibility</li>
                    <li><code>collapsible</code>: sub total rows can be collapsed or not</li>
                    <li><code>collapsed</code>: sub total rows initial collapsed state</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <pre>{
  "visible": true,
  "collapsible": true,
  "collapsed": false
}</pre>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">fields</span>
    <a name="Configuration-fields"></a><a href="#Configuration-fields"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Array</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Pivot grid fields mapping to data source fields. See <a href="#Pivot_Grid_Field">Pivot grid field</a>.
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>null</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">rows</span>
    <a name="Configuration-rows"></a><a href="#Configuration-rows"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Array</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Pivot grid initial row <a href="#Pivot_Grid_Field">fields</a>. Must be defined first within <code>fields</code> array.
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>null</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">columns</span>
    <a name="Configuration-columns"></a><a href="#Configuration-columns"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Array</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Pivot grid initial column <a href="#Pivot_Grid_Field">fields</a>. Must be defined first within <code>fields</code> array.
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>null</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">data</span>
    <a name="Configuration-data"></a><a href="#Configuration-data"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Array</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Pivot grid initial data <a href="#Pivot_Grid_Field">fields</a>. Must be defined first within <code>fields</code> array.
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>null</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">width</span>
    <a name="Configuration-width"></a><a href="#Configuration-width"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Number</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Pivot grid width in pixel.
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>100%</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">height</span>
    <a name="Configuration-height"></a><a href="#Configuration-height"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Number</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Pivot grid height in pixel.
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>auto</code>
            </td>
        </tr>
    </tbody>
</table>

<h3>
    Pivot Grid Field <a name="Pivot_Grid_Field"></a><a href="#Pivot_Grid_Field"><small>&#x00a7;</small></a>
</h3>

<br>
<p>A pivot grid field object is what describes the properties of a field when belonging to the different axes.
    <br>The configuration object accepts pivot grid field objects when configuring <code><a href="#Configuration-fields">fields</a></code>, <code><a href="#Configuration-rows">rows</a></code>, <code><a href="#Configuration-columns">columns</a></code> and <code><a href="#Configuration-data">data</a></code>.
    <br>
    <br>Configurations in <code>rows</code>, <code>columns</code> and <code>data</code> are only used when the pivot grid is first rendered and while the fields are not moved to other axes. These settings override the ones in <code>fields</code>.
</p>

<br/>

<h4>
    Properties <a name="Properties"></a><a href="#Properties"><small>&#x00a7;</small></a>
</h4>

<h2><small>
    <span class="label label-info">name</span>
    <a name="Properties-name"></a><a href="#Properties-name"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>String</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Property name within datasource that this field will map.
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>null</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">caption</span>
    <a name="Properties-caption"></a><a href="#Properties-caption"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>String</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Field caption (displayed on buttons, ...)
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>field.name</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">subTotal</span>
    <a name="Properties-subTotal"></a><a href="#Properties-subTotal"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Object</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Same as <a href="#Configuration-subTotal">global subTotal</a> option but only applicable to current field. Overrides the global subtotal option.
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <pre>{
  "visible": true,
  "collapsible": true,
  "collapsed": false
}</pre>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">sort</span>
    <a name="Properties-sort"></a><a href="#Properties-sort"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Object</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Defines sort settings:
                <ul>
                    <li><code>order</code>: field sort order: <code>'asc'</code>/<code>'desc'</code>
                    </li>
                    <li><code>customfunc</code>: custom sort function</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <pre>{
  "order": null,
  "customfunc": null
}</pre>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">filter</span>
    <a name="Properties-filter"></a><a href="#Properties-filter"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Object</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Defines filter settings:
                <ul>
                    <li><code>type</code>: filter type, <code>'regexp'</code> or <code>'operator'</code>
                    </li>
                    <li><code>regexp</code>: Data will be filtered on current field using this regexp. Ignored if type == 'operator'</li>
                    <li><code>operator</code>: Data will be filtered on curent field using this operator and the <code>value</code> option. possible values are: <code>=, &gt;, &lt;, &gt;=, &lt;=, &lt;&gt;</code>. Ignored if type == 'regexp'</li>
                    <li><code>value</code>: Value to compare to field values using the operator option. Ignored if type == 'regexp'</li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <pre>{
  "type": null,
  "regexp": null,
  "operator": null,
  "value": null
}</pre>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">aggregateFunc</span>
    <a name="Properties-aggregateFunc"></a><a href="#Properties-aggregateFunc"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Object</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Aggregate function when the field is dropped into the 'data' axe.
                <br>It can be one of the predefined constants:
                <ul>
                    <li><code>'sum'</code>: sum of the values</li>
                    <li><code>'count'</code>: count of the values</li>
                    <li><code>'min'</code>: min of the values</li>
                    <li><code>'max'</code>: max of the values</li>
                    <li><code>'avg'</code>: average of the values</li>
                    <li><code>'prod'</code>: product of the values</li>
                    <li><code>'var'</code>: estimate of the variance of the values, where they are considered as a subset of the entire population</li>
                    <li><code>'varp'</code>: estimate of the variance of the values, where they are considered as the entire population</li>
                    <li><code>'stdev'</code>: estimate of the standard deviation of the values, where they are considered as a subset of the entire population</li>
                    <li><code>'stdevp'</code>: estimate of the standard deviation of the values, where they are considered as the entire population</li>
                </ul>It can also be a custom aggregation function having the following signature:
                <br>&nbsp;&nbsp;&nbsp;&nbsp;<code>function(datafield, intersection, datasource, rowIndexes, colIndexes): number</code>
                <br>&nbsp;&nbsp;Where:
                <ul>
                    <li><code>datafield</code>: the name of the datafield for which the aggregation is calculated</li>
                    <li><code>intersection</code>: indexes in the data source array of all rows that will participate in this aggregation = drill down result of current cell.
                        <br>If the entire data source is included, this parameter will be equal to <code>'all'</code>.</li>
                    <li><code>datasource</code>: data source array</li>
                    <li><code>rowIndexes</code>: cell rows axe indexes in the data source array</li>
                    <li><code>colIndexes</code>: cell columns axe indexes in the data source array</li>
                </ul>&nbsp;&nbsp;Returns:
                <ul>
                    <li>aggregation result
                        <ul>
                        </ul>
                    </li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>'sum'</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">formatFunc</span>
    <a name="Properties-formatFunc"></a><a href="#Properties-formatFunc"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code>Function</code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Data cell formatting function when the field is dropped into the 'data' axe.
                <br>Signature:
                <br>&nbsp;&nbsp;&nbsp;&nbsp;<code>function(value): string</code>
                <br>&nbsp;&nbsp;Where:
                <ul>
                    <li><code>value</code>: raw numeric value</li>
                </ul>&nbsp;&nbsp;Returns:
                <ul>
                    <li>formatted value to display in pivot grid data cells
                        <ul>
                        </ul>
                    </li>
                </ul>
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>toString()</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">rowSettings</span>
    <a name="Properties-rowSettings"></a><a href="#Properties-rowSettings"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code><a href="#Pivot_Grid_Field">Pivot Grid Field</a></code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Settings to use when this field is dropped in the <strong>rows</strong> axe.These settings override general field settings
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>null</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">columnSettings</span>
    <a name="Properties-columnSettings"></a><a href="#Properties-columnSettings"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code><a href="#Pivot_Grid_Field">Pivot Grid Field</a></code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Settings to use when this field is dropped in the <strong>columns</strong> axe.These settings override general field settings
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>null</code>
            </td>
        </tr>
    </tbody>
</table>

<h2><small>
    <span class="label label-info">dataSettings</span>
    <a name="Properties-dataSettings"></a><a href="#Properties-dataSettings"><small>&#x00a7;</small></a>
    </small>
</h2>

<br>
<table class="table table-bordered">
    <tbody>
        <tr>
            <td class="bold" style="width: 151px">type</td>
            <td><code><a href="#Pivot_Grid_Field">Pivot Grid Field</a></code>
            </td>
        </tr>
        <tr>
            <td class="bold">description</td>
            <td>
                Settings to use when this field is dropped in the <strong>data</strong> axe.These settings override general field settings
            </td>
        </tr>
        <tr>
            <td class="bold">default</td>
            <td>
                <code>null</code>
            </td>
        </tr>
    </tbody>
</table>
